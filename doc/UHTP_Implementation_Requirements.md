# UHTP å®Ÿè£…è¦ä»¶å®šç¾©æ›¸

**ä½œæˆæ—¥**: 2025-12-24
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.1.0
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ğŸŸ¢ Approved for PoC
**å¯¾è±¡æ–‡æ›¸**: AI-DLC_base_UnifiedHMITrackingPlatform.md v2.2.0

---

## 0. è¨­è¨ˆæ±ºå®šäº‹é … (Design Decisions)

### PoCé–‹ç™ºã§ç¢ºå®šã—ãŸè¦ä»¶

| ã‚«ãƒ†ã‚´ãƒª | æ±ºå®šäº‹é … | å‚™è€ƒ |
|---------|---------|------|
| **åº§æ¨™ç³»** | 2Dï¼ˆXYå¹³é¢ï¼‰ | å…¨ã‚¿ã‚¹ã‚¯ã§2D |
| **ç‰©ç†ãƒ¢ãƒ‡ãƒ«** | XYç‹¬ç«‹2æ¬¡é…ã‚Œç³» | ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯è»¸ã”ã¨ã«YAMLè¨­å®šå¯èƒ½ |
| **å…¥åŠ›ãƒ¬ãƒ¼ãƒˆ** | ã‚¼ãƒ­æ¬¡ãƒ›ãƒ¼ãƒ«ãƒ‰ | å…¥åŠ›ãŒç„¡ã„é–“ã¯å‰å›å€¤ä¿æŒ |
| **ç”»é¢ã‚µã‚¤ã‚º** | YAMLè¨­å®šå¯èƒ½ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ1280x720 |
| **PoCå®Œäº†åŸºæº–** | å…¨ã‚¿ã‚¹ã‚¯ + å…¨ãƒ‡ãƒã‚¤ã‚¹å‹•ä½œ | 3ã‚¿ã‚¹ã‚¯ Ã— 5ãƒ‡ãƒã‚¤ã‚¹ |

### è¿½åŠ æ©Ÿèƒ½

| æ©Ÿèƒ½ | èª¬æ˜ | å„ªå…ˆåº¦ |
|------|------|--------|
| ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ—ãƒ­ãƒƒãƒˆ | è¿½å¾“èª¤å·®ãƒ»å…¥åŠ›å€¤ã®ãƒ©ã‚¤ãƒ–è¡¨ç¤ºï¼ˆ30Hzï¼‰ | ä¸­ |
| çµæœã‚µãƒãƒªãƒ¼ç”»é¢ | è©¦è¡Œå¾Œã®çµ±è¨ˆè¡¨ç¤ºãƒ»è»Œè·¡ãƒ—ãƒ­ãƒƒãƒˆ | ä¸­ |

---

## 1. ç ”ç©¶ãƒ—ãƒ­ãƒãƒ¼ã‚¶ãƒ«åˆ†æ

### 1.1 ç ”ç©¶ä»®èª¬

| ID | ä»®èª¬ | æ¤œè¨¼æ–¹æ³• |
|----|------|---------|
| **Hâ‚€-1** | Julia+Enzyme.jlã«ã‚ˆã‚‹å¾®åˆ†å¯èƒ½åˆ¶å¾¡ã¯ã€å¾“æ¥æ‰‹æ³•ã¨åŒç­‰ã®æ€§èƒ½ã—ã‹æŒãŸãªã„ | WCETæ¯”è¼ƒã€åæŸæ™‚é–“æ¸¬å®š |
| **Hâ‚-1** | Julia+Enzyme.jlã«ã‚ˆã‚Šã€1kHzãƒ«ãƒ¼ãƒ—å†…ã§$O(1)$å‹¾é…è¨ˆç®—ãŒå¯èƒ½ | `@btime`ã«ã‚ˆã‚‹ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ |
| **Hâ‚€-2** | SoSã‚¿ã‚¹ã‚¯ã§McRuerãƒ¢ãƒ‡ãƒ«ç‰¹æ€§ã¯å†ç¾ã•ã‚Œãªã„ | å‘¨æ³¢æ•°å¿œç­”è§£æ |
| **Hâ‚-2** | ã‚¯ãƒ­ã‚¹ã‚ªãƒ¼ãƒãƒ¼å‘¨æ³¢æ•°$\omega_c \approx 2-4$ rad/sãŒè¦³æ¸¬ã•ã‚Œã‚‹ | Bodeç·šå›³è§£æ |

### 1.2 æ–°è¦æ€§ (Delta)

**ã€ŒHuman-in-the-Loopå¾®åˆ†å¯èƒ½åˆ¶å¾¡ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã€**: æ—¢å­˜ã®å¾®åˆ†å¯èƒ½ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ï¼ˆBrax, MJXï¼‰ã¯ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒãƒƒãƒå‡¦ç†å‘ã‘ã§ã‚ã‚‹ã®ã«å¯¾ã—ã€UHTPã¯1kHzãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ã®å‹¾é…ãƒ™ãƒ¼ã‚¹æœ€é©åŒ–ã‚’å®Ÿç¾ã™ã‚‹åˆã®çµ±åˆç’°å¢ƒã€‚

### 1.3 æŠ€è¡“çš„è¦ç´ 

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ | å½¹å‰² |
|---------|------|------|
| è‡ªå‹•å¾®åˆ† | Enzyme.jl | é€†ãƒ¢ãƒ¼ãƒ‰ADã€$O(1)$å‹¾é…è¨ˆç®— |
| ç‰©ç†æ¼”ç®— | DifferentialEquations.jl | é«˜ç²¾åº¦ODEç©åˆ† |
| çŠ¶æ…‹æ¨å®š | RxInfer.jl | ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ™ã‚¤ã‚ºæ¨è«– |
| å¯è¦–åŒ– | VisPy/PyGame | 60Hzæç”» |
| GUI | PyQt6 | ãƒ‡ãƒã‚¤ã‚¹é¸æŠãƒ»è¨­å®š |

### 1.4 è©•ä¾¡æŒ‡æ¨™

| ç¨®åˆ¥ | æŒ‡æ¨™ | ç›®æ¨™å€¤ | æ¸¬å®šæ–¹æ³• |
|------|------|--------|---------|
| **ä¸»è¦** | åˆ¶å¾¡ãƒ«ãƒ¼ãƒ—WCET | < 600 Î¼s | `@btime` |
| **ä¸»è¦** | GCã‚¢ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ | 0 bytes | `@btime` |
| **ä¸»è¦** | è¿½å¾“èª¤å·®RMSE | < 5 mm | ã‚ªãƒ³ãƒ©ã‚¤ãƒ³è¨ˆç®— |
| **å‰¯æ¬¡** | é€šä¿¡ã‚¸ãƒƒã‚¿ | < 2 ms (99%ile) | ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ— |
| **å‰¯æ¬¡** | æç”»FPS | â‰¥ 60 Hz | ãƒ•ãƒ¬ãƒ¼ãƒ æ¸¬å®š |

### 1.5 å®Ÿé¨“è¨­è¨ˆ

| é …ç›® | å†…å®¹ |
|------|------|
| **ã‚¿ã‚¹ã‚¯** | SoS, CIT, Fittsï¼ˆå…¨3ç¨®ï¼‰ |
| **å…¥åŠ›ãƒ‡ãƒã‚¤ã‚¹** | ãƒˆãƒ©ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰ã€ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã€ãƒã‚¦ã‚¹ã€Auto-PDã€UDP |
| **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ç¯„å›²** | $M \in [0.5, 2.0]$, $B \in [2, 10]$, $K \in [0, 20]$ |
| **è©¦è¡Œæ§‹æˆ** | 1è©¦è¡Œ60ç§’ã€ä¼‘æ†©30ç§’ã€è¨ˆ20è©¦è¡Œ |

---

## 2. æ©Ÿèƒ½è¦ä»¶

### 2.1 ã‚³ã‚¢æ©Ÿèƒ½ï¼ˆå¿…é ˆãƒ»é«˜å„ªå…ˆåº¦ï¼‰

| ID | æ©Ÿèƒ½å | èª¬æ˜ | ä»®èª¬å¯¾å¿œ |
|----|-------|------|---------|
| **F-C01** | ç‰©ç†æ¼”ç®—ã‚¨ãƒ³ã‚¸ãƒ³ | 2æ¬¡é…ã‚Œç³»ãƒ€ã‚¤ãƒŠãƒŸã‚¯ã‚¹ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç©åˆ†ï¼ˆRK4ï¼‰ | Hâ‚-1 |
| **F-C02** | å…¥åŠ›ãƒ‡ãƒã‚¤ã‚¹æŠ½è±¡åŒ– | è¤‡æ•°ãƒ‡ãƒã‚¤ã‚¹ã‚’çµ±ä¸€ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã§æ‰±ã† | - |
| **F-C03** | UDPé€šä¿¡ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« | Juliaâ†’PythonçŠ¶æ…‹é€ä¿¡ï¼ˆ1kHzï¼‰ | Hâ‚-1 |
| **F-C04** | çŠ¶æ…‹å¯è¦–åŒ– | ã‚«ãƒ¼ã‚½ãƒ«ãƒ»ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ»è»Œè·¡ã®æç”»ï¼ˆ60Hzï¼‰ | Hâ‚-2 |
| **F-C05** | ã‚¿ã‚¹ã‚¯ã‚¨ãƒ³ã‚¸ãƒ³ | SoS/CIT/Fittsã®åˆ‡ã‚Šæ›¿ãˆãƒ»å®Ÿè¡Œåˆ¶å¾¡ | Hâ‚-2 |
| **F-C06** | ãƒ‡ãƒ¼ã‚¿ãƒ­ã‚¬ãƒ¼ | æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã®HDF5ä¿å­˜ | å†ç¾æ€§ |

### 2.2 å…¥åŠ›ãƒ‡ãƒã‚¤ã‚¹æ©Ÿèƒ½

| ID | æ©Ÿèƒ½å | èª¬æ˜ | å„ªå…ˆåº¦ |
|----|-------|------|--------|
| **F-I01** | ãƒˆãƒ©ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰å…¥åŠ› | MacBook Air M2ã®ãƒˆãƒ©ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰åº§æ¨™å–å¾— | é«˜ |
| **F-I02** | ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰å…¥åŠ› | çŸ¢å°ã‚­ãƒ¼ã«ã‚ˆã‚‹é›¢æ•£çš„åŠ›å…¥åŠ› | é«˜ |
| **F-I03** | ãƒã‚¦ã‚¹å…¥åŠ› | ä¸€èˆ¬ãƒã‚¦ã‚¹ã®ç›¸å¯¾/çµ¶å¯¾åº§æ¨™å–å¾— | é«˜ |
| **F-I04** | Auto-PDåˆ¶å¾¡å™¨ | å¯å¤‰ãƒã‚¤ã‚ºä»˜ãPDåˆ¶å¾¡ã«ã‚ˆã‚‹ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å…¥åŠ› | é«˜ |
| **F-I05** | UDPãƒãƒ—ãƒ†ã‚£ãƒƒã‚¯å—ä¿¡ | å¤–éƒ¨ãƒ‡ãƒã‚¤ã‚¹ã‹ã‚‰ã®UDPå…¥åŠ›å—ä¿¡ | ä½ï¼ˆå°†æ¥ï¼‰ |
| **F-I06** | ãƒ‡ãƒã‚¤ã‚¹é¸æŠGUI | ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã«ã‚ˆã‚‹å…¥åŠ›ãƒ‡ãƒã‚¤ã‚¹åˆ‡æ›¿ | é«˜ |

### 2.3 ã‚¿ã‚¹ã‚¯æ©Ÿèƒ½

| ID | æ©Ÿèƒ½å | èª¬æ˜ | å„ªå…ˆåº¦ |
|----|-------|------|--------|
| **F-T01** | SoSè»Œé“ç”Ÿæˆ | ç´ æ•°å€å‘¨æ³¢æ•°ã®æ­£å¼¦æ³¢åˆæˆ | é«˜ |
| **F-T02** | CITãƒ€ã‚¤ãƒŠãƒŸã‚¯ã‚¹ | ä¸å®‰å®š1æ¬¡ç³»ã€$\lambda$è‡ªå‹•å¢—åŠ  | é«˜ |
| **F-T03** | Fittsã‚¿ãƒ¼ã‚²ãƒƒãƒˆé…ç½® | å††å‘¨ä¸Š13ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã€IDè¨ˆç®— | é«˜ |
| **F-T04** | ã‚¿ã‚¹ã‚¯ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¨­å®š | GUIçµŒç”±ã§ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¿æ•´ | ä¸­ |
| **F-T05** | è©¦è¡Œã‚·ãƒ¼ã‚±ãƒ³ã‚¹ç®¡ç† | è©¦è¡Œé–‹å§‹/çµ‚äº†/ä¼‘æ†©ã®è‡ªå‹•åˆ¶å¾¡ | ä¸­ |

### 2.4 å®Ÿé¨“æ”¯æ´æ©Ÿèƒ½

| ID | æ©Ÿèƒ½å | èª¬æ˜ | å„ªå…ˆåº¦ |
|----|-------|------|--------|
| **F-E01** | ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ©ãƒ³ãƒ€ãƒ åŒ– | è©¦è¡Œé–‹å§‹å‰ã®M/B/Kãƒ©ãƒ³ãƒ€ãƒ è¨­å®š | ä¸­ |
| **F-E02** | è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç† | YAML/JSONã«ã‚ˆã‚‹å®Ÿé¨“è¨­å®šä¿å­˜ãƒ»èª­è¾¼ | é«˜ |
| **F-E03** | å®Ÿé¨“ãƒ­ã‚° | è¨­å®šãƒ»ç’°å¢ƒæƒ…å ±ã®CSVå‡ºåŠ› | é«˜ |
| **F-E04** | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ—ãƒ­ãƒƒãƒˆ | è¿½å¾“èª¤å·®ãƒ»å…¥åŠ›å€¤ã®ãƒ©ã‚¤ãƒ–è¡¨ç¤º | ä½ |
| **F-E05** | è¢«é¨“è€…IDç®¡ç† | åŒ¿ååŒ–IDã®ç”Ÿæˆãƒ»ç®¡ç† | ä½ |

### 2.5 å¯è¦–åŒ–æ©Ÿèƒ½

| ID | æ©Ÿèƒ½å | èª¬æ˜ | å„ªå…ˆåº¦ |
|----|-------|------|--------|
| **F-V01** | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ—ãƒ­ãƒƒãƒˆ | è¿½å¾“èª¤å·®ãƒ»å…¥åŠ›å€¤ã®30Hzãƒ©ã‚¤ãƒ–è¡¨ç¤º | ä¸­ |
| **F-V02** | çµæœã‚µãƒãƒªãƒ¼ç”»é¢ | è©¦è¡Œå¾ŒRMSEãƒ»è»Œè·¡è¡¨ç¤º | ä¸­ |
| **F-V03** | è»Œè·¡ãƒ—ãƒ­ãƒƒãƒˆ | XYå¹³é¢ã§ã®ã‚«ãƒ¼ã‚½ãƒ«è»Œè·¡ãƒ»ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ | ä¸­ |
| **F-V04** | ãƒ¬ãƒãƒ¼ãƒˆä¿å­˜ | PNG + CSVã§ã®çµæœã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ | ä½ |

### 2.6 å°†æ¥æ‹¡å¼µæ©Ÿèƒ½ï¼ˆPoCå¾Œï¼‰

| ID | æ©Ÿèƒ½å | èª¬æ˜ | å„ªå…ˆåº¦ |
|----|-------|------|--------|
| **F-X01** | Enzyme.jlå‹¾é…è¨ˆç®— | STAç”¨å¾®åˆ†å¯èƒ½MPC | ä½ |
| **F-X02** | RxInfer.jlæ¨è«– | IMMç”¨ã‚ªãƒ³ãƒ©ã‚¤ãƒ³æ¨å®š | ä½ |
| **F-X03** | ã‚¦ã‚©ãƒƒãƒãƒ‰ãƒƒã‚°ã‚¿ã‚¤ãƒ | ãƒãƒ—ãƒ†ã‚£ãƒƒã‚¯å®‰å…¨æ©Ÿæ§‹ | ä½ |

---

## 3. éæ©Ÿèƒ½è¦ä»¶

### 3.1 æ€§èƒ½è¦ä»¶

| ID | è¦ä»¶ | ç›®æ¨™å€¤ | è¨±å®¹å€¤ | æ¸¬å®šæ–¹æ³• |
|----|------|--------|--------|---------|
| **NF-P01** | Juliaåˆ¶å¾¡ãƒ«ãƒ¼ãƒ—å‘¨æœŸ | 1 ms | â‰¤ 1.5 ms | `@btime` |
| **NF-P02** | WCETï¼ˆæœ€æ‚ªå®Ÿè¡Œæ™‚é–“ï¼‰ | 165 Î¼s | â‰¤ 600 Î¼s | ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ© |
| **NF-P03** | GCã‚¢ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ | 0 bytes | 0 bytes | `@btime` |
| **NF-P04** | UDPé€šä¿¡é…å»¶ | < 0.5 ms | < 2 ms | ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ— |
| **NF-P05** | Pythonæç”»FPS | 60 Hz | â‰¥ 30 Hz | ãƒ•ãƒ¬ãƒ¼ãƒ ã‚«ã‚¦ãƒ³ãƒˆ |
| **NF-P06** | èµ·å‹•æ™‚é–“ | < 5 s | < 10 s | å®Ÿæ¸¬ |

### 3.2 å†ç¾æ€§è¦ä»¶

| ID | è¦ä»¶ | å®Ÿè£…æ–¹æ³• |
|----|------|---------|
| **NF-R01** | ä¹±æ•°ã‚·ãƒ¼ãƒ‰å›ºå®š | Julia: `Random.seed!()`, Python: `np.random.seed()` |
| **NF-R02** | ç’°å¢ƒè¨˜éŒ² | `Project.toml`, `requirements.txt`ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³å›ºå®š |
| **NF-R03** | ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ­ã‚° | å…¨è¨­å®šã‚’YAML/JSONã§è‡ªå‹•ä¿å­˜ |
| **NF-R04** | ãƒ‡ãƒ¼ã‚¿å½¢å¼çµ±ä¸€ | HDF5æ§‹é€ ã‚¹ã‚­ãƒ¼ãƒã®å®šç¾©ãƒ»æ¤œè¨¼ |

### 3.3 äº’æ›æ€§è¦ä»¶

| ID | è¦ä»¶ | è©³ç´° |
|----|------|------|
| **NF-C01** | OS | macOS 14+ (Apple Silicon), Ubuntu 22.04+ |
| **NF-C02** | Julia | v1.10+ |
| **NF-C03** | Python | 3.11+ |
| **NF-C04** | ç”»é¢è§£åƒåº¦ | 1920x1080ä»¥ä¸Šæ¨å¥¨ã€1280x720æœ€å° |

### 3.4 ãƒ†ã‚¹ãƒˆè¦ä»¶

| ID | è¦ä»¶ | ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™ |
|----|------|--------------|
| **NF-T01** | ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ | > 70% |
| **NF-T02** | çµ±åˆãƒ†ã‚¹ãƒˆ | ä¸»è¦ãƒ‘ã‚¹100% |
| **NF-T03** | æ€§èƒ½å›å¸°ãƒ†ã‚¹ãƒˆ | WCETé–¾å€¤ãƒã‚§ãƒƒã‚¯ |

---

## 4. ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### 4.1 ãƒ—ãƒ­ã‚»ã‚¹æ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    macOS / Linux Host                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Julia Core (1kHz)        â”‚   Python Viewer (60Hz)             â”‚
â”‚                            â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ PhysicsEngine    â”‚      â”‚  â”‚ UDPReceiver      â”‚              â”‚
â”‚  â”‚ - dynamics.jl    â”‚      â”‚  â”‚ - receiver.py    â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚           â”‚                â”‚           â”‚                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ InputHandler     â”‚      â”‚  â”‚ Visualizer       â”‚              â”‚
â”‚  â”‚ - devices.jl     â”‚â—„â”€â”€â”€â”€â”€â”¼â”€â”€â”‚ - renderer.py    â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚           â”‚                â”‚           â”‚                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ TaskEngine       â”‚      â”‚  â”‚ GUI Controller   â”‚              â”‚
â”‚  â”‚ - sos.jl         â”‚      â”‚  â”‚ - main_window.py â”‚              â”‚
â”‚  â”‚ - cit.jl         â”‚â”€â”€â”€â”€â”€â”€â”¼â”€â–ºâ”‚ - settings.py    â”‚              â”‚
â”‚  â”‚ - fitts.jl       â”‚ UDP  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚           â”‚                        â”‚
â”‚           â”‚                â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”‚ DataLogger       â”‚              â”‚
â”‚  â”‚ UDPSender        â”‚â”€â”€â”€â”€â”€â”€â”¼â”€â–ºâ”‚ - hdf5_writer.py â”‚              â”‚
â”‚  â”‚ - network.jl     â”‚      â”‚  â”‚ - csv_writer.py  â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
crlUHMI/
â”œâ”€â”€ CLAUDE.md                    # Claude Codeç”¨ã‚¬ã‚¤ãƒ‰
â”œâ”€â”€ doc/
â”‚   â”œâ”€â”€ AI-DLC_base_UnifiedHMITrackingPlatform.md
â”‚   â”œâ”€â”€ UHTP_Implementation_Requirements.md  # ã“ã®æ–‡æ›¸
â”‚   â””â”€â”€ requirements.yaml
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ default_experiment.yaml  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®Ÿé¨“è¨­å®š
â”‚   â””â”€â”€ devices.yaml             # ãƒ‡ãƒã‚¤ã‚¹è¨­å®š
â”‚
â”œâ”€â”€ julia/                       # Julia Core Process
â”‚   â”œâ”€â”€ Project.toml
â”‚   â”œâ”€â”€ Manifest.toml
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ UHTP.jl              # ãƒ¡ã‚¤ãƒ³ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚   â”‚   â”œâ”€â”€ physics/
â”‚   â”‚   â”‚   â”œâ”€â”€ dynamics.jl      # 2æ¬¡é…ã‚Œç³»ãƒ€ã‚¤ãƒŠãƒŸã‚¯ã‚¹
â”‚   â”‚   â”‚   â””â”€â”€ integrator.jl    # RK4ç©åˆ†å™¨
â”‚   â”‚   â”œâ”€â”€ input/
â”‚   â”‚   â”‚   â”œâ”€â”€ abstract.jl      # InputDeviceæŠ½è±¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ keyboard.jl      # ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰å…¥åŠ›
â”‚   â”‚   â”‚   â”œâ”€â”€ mouse.jl         # ãƒã‚¦ã‚¹å…¥åŠ›
â”‚   â”‚   â”‚   â”œâ”€â”€ trackpad.jl      # ãƒˆãƒ©ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰å…¥åŠ›
â”‚   â”‚   â”‚   â””â”€â”€ auto_pd.jl       # Auto-PDåˆ¶å¾¡å™¨
â”‚   â”‚   â”œâ”€â”€ tasks/
â”‚   â”‚   â”‚   â”œâ”€â”€ abstract.jl      # TaskæŠ½è±¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ sos.jl           # Sum-of-Sines
â”‚   â”‚   â”‚   â”œâ”€â”€ cit.jl           # Critical Instability
â”‚   â”‚   â”‚   â””â”€â”€ fitts.jl         # Fitts' Law
â”‚   â”‚   â”œâ”€â”€ network/
â”‚   â”‚   â”‚   â”œâ”€â”€ udp_sender.jl    # UDPé€ä¿¡
â”‚   â”‚   â”‚   â””â”€â”€ protocol.jl      # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ—ãƒ­ãƒˆã‚³ãƒ«
â”‚   â”‚   â””â”€â”€ core/
â”‚   â”‚       â”œâ”€â”€ state.jl         # çŠ¶æ…‹ç®¡ç†
â”‚   â”‚       â”œâ”€â”€ config.jl        # è¨­å®šèª­è¾¼
â”‚   â”‚       â””â”€â”€ loop.jl          # ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ—
â”‚   â””â”€â”€ test/
â”‚       â”œâ”€â”€ runtests.jl
â”‚       â”œâ”€â”€ test_dynamics.jl
â”‚       â”œâ”€â”€ test_tasks.jl
â”‚       â””â”€â”€ test_performance.jl
â”‚
â”œâ”€â”€ python/                      # Python Viewer Process
â”‚   â”œâ”€â”€ pyproject.toml
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ main.py              # ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ network/
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ udp_receiver.py  # UDPå—ä¿¡
â”‚   â”‚   â”‚   â””â”€â”€ protocol.py      # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ‘ãƒ¼ã‚¹
â”‚   â”‚   â”œâ”€â”€ visualization/
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ renderer.py      # VisPy/PyGameæç”»
â”‚   â”‚   â”‚   â””â”€â”€ elements.py      # æç”»è¦ç´ ï¼ˆã‚«ãƒ¼ã‚½ãƒ«ã€ã‚¿ãƒ¼ã‚²ãƒƒãƒˆï¼‰
â”‚   â”‚   â”œâ”€â”€ gui/
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ main_window.py   # ãƒ¡ã‚¤ãƒ³ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦
â”‚   â”‚   â”‚   â”œâ”€â”€ device_panel.py  # ãƒ‡ãƒã‚¤ã‚¹é¸æŠãƒ‘ãƒãƒ«
â”‚   â”‚   â”‚   â”œâ”€â”€ task_panel.py    # ã‚¿ã‚¹ã‚¯è¨­å®šãƒ‘ãƒãƒ«
â”‚   â”‚   â”‚   â””â”€â”€ settings.py      # è¨­å®šãƒ€ã‚¤ã‚¢ãƒ­ã‚°
â”‚   â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ hdf5_writer.py   # HDF5æ›¸ãè¾¼ã¿
â”‚   â”‚   â”‚   â”œâ”€â”€ csv_writer.py    # CSVæ›¸ãè¾¼ã¿
â”‚   â”‚   â”‚   â””â”€â”€ schema.py        # ãƒ‡ãƒ¼ã‚¿ã‚¹ã‚­ãƒ¼ãƒ
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â””â”€â”€ config.py        # è¨­å®šç®¡ç†
â”‚   â””â”€â”€ tests/
â”‚       â”œâ”€â”€ test_receiver.py
â”‚       â”œâ”€â”€ test_renderer.py
â”‚       â””â”€â”€ test_data.py
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ start_julia.sh           # Juliaèµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â”œâ”€â”€ start_python.sh          # Pythonèµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â””â”€â”€ run_experiment.sh        # çµ±åˆèµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚
â””â”€â”€ data/                        # å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿ï¼ˆgitignoreï¼‰
    â””â”€â”€ .gitkeep
```

### 4.3 é€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«

#### UDP ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ (Julia â†’ Python)

```
ãƒã‚¤ãƒŠãƒªãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆãƒªãƒˆãƒ«ã‚¨ãƒ³ãƒ‡ã‚£ã‚¢ãƒ³ã€åˆè¨ˆ56ãƒã‚¤ãƒˆï¼‰:

Offset  Size  Type     Field
------  ----  ----     -----
0       8     Float64  timestamp_us    # ãƒã‚¤ã‚¯ãƒ­ç§’ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
8       8     Float64  cursor_x        # ã‚«ãƒ¼ã‚½ãƒ«ä½ç½® X [m]
16      8     Float64  cursor_y        # ã‚«ãƒ¼ã‚½ãƒ«ä½ç½® Y [m] (1DoFãªã‚‰0)
24      8     Float64  cursor_vx       # ã‚«ãƒ¼ã‚½ãƒ«é€Ÿåº¦ X [m/s]
32      8     Float64  cursor_vy       # ã‚«ãƒ¼ã‚½ãƒ«é€Ÿåº¦ Y [m/s]
40      8     Float64  target_x        # ã‚¿ãƒ¼ã‚²ãƒƒãƒˆä½ç½® X [m]
48      8     Float64  target_y        # ã‚¿ãƒ¼ã‚²ãƒƒãƒˆä½ç½® Y [m]
56      4     UInt32   task_state      # ã‚¿ã‚¹ã‚¯çŠ¶æ…‹ (enum)
60      4     UInt32   trial_number    # è©¦è¡Œç•ªå·
```

#### ã‚¿ã‚¹ã‚¯çŠ¶æ…‹ (task_state) åˆ—æŒ™å€¤

```julia
@enum TaskState begin
    IDLE = 0
    RUNNING = 1
    PAUSED = 2
    COMPLETED = 3
    FAILED = 4  # CITã§ç™ºæ•£ã—ãŸå ´åˆ
end
```

### 4.4 ãƒ‡ãƒ¼ã‚¿ã‚¹ã‚­ãƒ¼ãƒ

#### HDF5æ§‹é€ 

```
experiment_YYYYMMDD_HHMMSS.h5
â”œâ”€â”€ metadata/
â”‚   â”œâ”€â”€ subject_id          # string
â”‚   â”œâ”€â”€ experiment_date     # string (ISO8601)
â”‚   â”œâ”€â”€ julia_version       # string
â”‚   â”œâ”€â”€ python_version      # string
â”‚   â”œâ”€â”€ config              # JSON string (å®Ÿé¨“è¨­å®šå…¨ä½“)
â”‚   â””â”€â”€ device              # string (ä½¿ç”¨ãƒ‡ãƒã‚¤ã‚¹)
â”‚
â”œâ”€â”€ trials/
â”‚   â”œâ”€â”€ trial_001/
â”‚   â”‚   â”œâ”€â”€ task_type       # string ("sos", "cit", "fitts")
â”‚   â”‚   â”œâ”€â”€ parameters/
â”‚   â”‚   â”‚   â”œâ”€â”€ mass        # float64
â”‚   â”‚   â”‚   â”œâ”€â”€ damping     # float64
â”‚   â”‚   â”‚   â””â”€â”€ stiffness   # float64
â”‚   â”‚   â”œâ”€â”€ timeseries/     # å„åˆ—ã¯Float64é…åˆ—
â”‚   â”‚   â”‚   â”œâ”€â”€ timestamp   # [N] ãƒã‚¤ã‚¯ãƒ­ç§’
â”‚   â”‚   â”‚   â”œâ”€â”€ cursor_x    # [N] m
â”‚   â”‚   â”‚   â”œâ”€â”€ cursor_vx   # [N] m/s
â”‚   â”‚   â”‚   â”œâ”€â”€ target_x    # [N] m
â”‚   â”‚   â”‚   â”œâ”€â”€ input_u     # [N] N (å…¥åŠ›åŠ›)
â”‚   â”‚   â”‚   â””â”€â”€ error       # [N] m (è¿½å¾“èª¤å·®)
â”‚   â”‚   â””â”€â”€ summary/
â”‚   â”‚       â”œâ”€â”€ rmse        # float64
â”‚   â”‚       â”œâ”€â”€ duration_s  # float64
â”‚   â”‚       â””â”€â”€ result      # string ("success", "failed")
â”‚   â”œâ”€â”€ trial_002/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ ...
â”‚
â””â”€â”€ analysis/               # å¾Œå‡¦ç†ç”¨ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
    â””â”€â”€ ...
```

---

## 5. å®Ÿè£…è¨ˆç”»

### 5.1 ãƒ•ã‚§ãƒ¼ã‚º1: æœ€å°å‹•ä½œç‰ˆ (MVP) - Week 1-2

**ç›®æ¨™**: Juliaâ†’Pythoné€šä¿¡ãŒå‹•ä½œã—ã€ãƒã‚¦ã‚¹å…¥åŠ›ã§ç‚¹ãŒå‹•ã

| Week | ã‚¿ã‚¹ã‚¯ | æˆæœç‰© | æ‹…å½“ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« |
|------|-------|--------|---------------|
| 1 | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆä½œæˆ | ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã€Project.toml, pyproject.toml | å…¨ä½“ |
| 1 | UDPé€šä¿¡åŸºç›¤ | Juliaé€ä¿¡ã€Pythonå—ä¿¡ãŒå‹•ä½œ | network/ |
| 1 | åŸºæœ¬æç”» | VisPyã§ç‚¹ãŒè¡¨ç¤ºã•ã‚Œã‚‹ | visualization/ |
| 2 | ç‰©ç†æ¼”ç®— | 2æ¬¡é…ã‚Œç³»ãŒå‹•ä½œ | physics/ |
| 2 | ãƒã‚¦ã‚¹å…¥åŠ› | ãƒã‚¦ã‚¹åº§æ¨™å–å¾—â†’åŠ›å…¥åŠ›å¤‰æ› | input/mouse.jl |
| 2 | çµ±åˆãƒ†ã‚¹ãƒˆ | ãƒã‚¦ã‚¹ã§ç‚¹ãŒå‹•ã | - |

**æ¤œè¨¼ãƒã‚¤ãƒ³ãƒˆ**: ãƒã‚¦ã‚¹ã§ã‚«ãƒ¼ã‚½ãƒ«ã‚’å‹•ã‹ã—ã€60FPSã§è¿½å¾“æç”»ã•ã‚Œã‚‹

### 5.2 ãƒ•ã‚§ãƒ¼ã‚º2: ã‚¿ã‚¹ã‚¯å®Ÿè£… - Week 3-4

**ç›®æ¨™**: 3ã‚¿ã‚¹ã‚¯ã™ã¹ã¦ãŒå‹•ä½œã™ã‚‹

| Week | ã‚¿ã‚¹ã‚¯ | æˆæœç‰© | æ‹…å½“ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« |
|------|-------|--------|---------------|
| 3 | SoSã‚¿ã‚¹ã‚¯ | æ­£å¼¦æ³¢è¿½å¾“ãŒå‹•ä½œ | tasks/sos.jl |
| 3 | ä»–å…¥åŠ›ãƒ‡ãƒã‚¤ã‚¹ | ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã€ãƒˆãƒ©ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰å¯¾å¿œ | input/ |
| 3 | ãƒ‡ãƒã‚¤ã‚¹é¸æŠGUI | PyQt6ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ | gui/device_panel.py |
| 4 | CITã‚¿ã‚¹ã‚¯ | ä¸å®‰å®šç³»ã€Î»å¢—åŠ ãŒå‹•ä½œ | tasks/cit.jl |
| 4 | Fittsã‚¿ã‚¹ã‚¯ | å††å‘¨ã‚¿ãƒ¼ã‚²ãƒƒãƒˆè¡¨ç¤ºãƒ»ã‚¯ãƒªãƒƒã‚¯åˆ¤å®š | tasks/fitts.jl |
| 4 | Auto-PDåˆ¶å¾¡å™¨ | ãƒã‚¤ã‚ºä»˜ãPDã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ | input/auto_pd.jl |

**æ¤œè¨¼ãƒã‚¤ãƒ³ãƒˆ**: å„ã‚¿ã‚¹ã‚¯ã§æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œãŒç¢ºèªã§ãã‚‹

### 5.3 ãƒ•ã‚§ãƒ¼ã‚º3: ãƒ‡ãƒ¼ã‚¿ãƒ»è¨­å®šãƒ»å“è³ª - Week 5-6

**ç›®æ¨™**: å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿ä¿å­˜ã€è¨­å®šç®¡ç†ã€ãƒ†ã‚¹ãƒˆãŒæ•´ã†

| Week | ã‚¿ã‚¹ã‚¯ | æˆæœç‰© | æ‹…å½“ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« |
|------|-------|--------|---------------|
| 5 | HDF5ãƒ­ã‚¬ãƒ¼ | æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ä¿å­˜ | data/hdf5_writer.py |
| 5 | CSVã‚µãƒãƒªå‡ºåŠ› | è©¦è¡Œã”ã¨ã®ã‚µãƒãƒªCSV | data/csv_writer.py |
| 5 | è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«èª­è¾¼ | YAMLè¨­å®šã®èª­è¾¼ãƒ»é©ç”¨ | config/ |
| 6 | æ€§èƒ½ãƒ†ã‚¹ãƒˆ | WCET < 600Î¼sç¢ºèª | test/test_performance.jl |
| 6 | ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ | ä¸»è¦ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ†ã‚¹ãƒˆ | test/ |
| 6 | ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™ | READMEã€ä½¿ç”¨æ–¹æ³• | - |

**æ¤œè¨¼ãƒã‚¤ãƒ³ãƒˆ**: å®Ÿé¨“ã‚’å®Ÿè¡Œã—ã€æ­£ã—ã„HDF5ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã‚‹

### 5.4 ãƒªã‚¹ã‚¯ç®¡ç†

| ãƒªã‚¹ã‚¯ | å½±éŸ¿åº¦ | ç™ºç”Ÿç¢ºç‡ | å¯¾ç­– |
|--------|--------|---------|------|
| Julia GCã«ã‚ˆã‚‹é…å»¶ | é«˜ | ä¸­ | StaticArrays.jlå¾¹åº•ã€ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚° |
| UDP ãƒ‘ã‚±ãƒƒãƒˆãƒ­ã‚¹ | ä¸­ | ä½ | ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ç•ªå·ä»˜ä¸ã€å†é€ã¯è¡Œã‚ãªã„ |
| MacOSå…¥åŠ›APIåˆ¶é™ | ä¸­ | ä¸­ | PyGameãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã€Accessibilityè¨±å¯ç¢ºèª |
| VisPyæç”»é…å»¶ | ä½ | ä¸­ | PyGameãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã€å‚ç›´åŒæœŸç„¡åŠ¹åŒ– |

---

## 6. ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### 6.1 ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ

#### Juliaå´

```julia
# test/test_dynamics.jl
@testset "Dynamics" begin
    @testset "Second-order system" begin
        state = State(c=0.0, v=0.0)
        params = Params(M=1.0, B=5.0, K=0.0)
        u = 1.0  # 1Nå…¥åŠ›

        # 1ã‚¹ãƒ†ãƒƒãƒ—å¾Œã®çŠ¶æ…‹
        new_state = step!(state, params, u, dt=0.001)
        @test new_state.v â‰ˆ 0.001 atol=1e-6  # v = u/M * dt
    end

    @testset "Zero allocation" begin
        state = State(c=0.0, v=0.0)
        params = Params(M=1.0, B=5.0, K=0.0)

        allocs = @allocated step!(state, params, 1.0, dt=0.001)
        @test allocs == 0
    end
end
```

#### Pythonå´

```python
# tests/test_receiver.py
def test_message_parsing():
    """UDPãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ‘ãƒ¼ã‚¹ãŒæ­£ã—ã„ã“ã¨"""
    # 56ãƒã‚¤ãƒˆã®ãƒ†ã‚¹ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä½œæˆ
    msg = struct.pack('<dddddddII',
        1000000.0,  # timestamp
        0.05,       # cursor_x
        0.0,        # cursor_y
        0.1,        # cursor_vx
        0.0,        # cursor_vy
        0.08,       # target_x
        0.0,        # target_y
        1,          # task_state (RUNNING)
        5           # trial_number
    )

    state = parse_message(msg)
    assert state.cursor_x == pytest.approx(0.05)
    assert state.task_state == TaskState.RUNNING
```

### 6.2 çµ±åˆãƒ†ã‚¹ãƒˆ

```python
# tests/test_integration.py
def test_julia_python_communication():
    """Julia-Pythoné–“é€šä¿¡ã®çµ±åˆãƒ†ã‚¹ãƒˆ"""
    # Juliaãƒ—ãƒ­ã‚»ã‚¹èµ·å‹•
    julia_proc = subprocess.Popen(['julia', 'src/UHTP.jl', '--test-mode'])

    # Pythonå—ä¿¡é–‹å§‹
    receiver = UDPReceiver(port=12345)

    # 1ç§’é–“ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å—ä¿¡
    messages = []
    start = time.time()
    while time.time() - start < 1.0:
        msg = receiver.receive(timeout=0.1)
        if msg:
            messages.append(msg)

    # æ¤œè¨¼: ç´„1000ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å—ä¿¡ï¼ˆ1kHzï¼‰
    assert len(messages) > 900

    # ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ãŒå˜èª¿å¢—åŠ 
    timestamps = [m.timestamp for m in messages]
    assert all(t2 > t1 for t1, t2 in zip(timestamps, timestamps[1:]))

    julia_proc.terminate()
```

### 6.3 æ€§èƒ½ãƒ†ã‚¹ãƒˆ

```julia
# test/test_performance.jl
@testset "Performance" begin
    @testset "Control loop WCET" begin
        state = State(c=0.0, v=0.0)
        params = Params(M=1.0, B=5.0, K=0.0)
        task = SoSTask()

        # ã‚¦ã‚©ãƒ¼ãƒ ã‚¢ãƒƒãƒ—
        for _ in 1:1000
            control_loop_step!(state, params, task)
        end

        # æ¸¬å®š
        times = Float64[]
        for _ in 1:10000
            t = @elapsed control_loop_step!(state, params, task)
            push!(times, t * 1e6)  # Î¼s
        end

        wcet = maximum(times)
        p99 = quantile(times, 0.99)

        @test wcet < 600.0  # WCET < 600Î¼s
        @test p99 < 200.0   # 99%ile < 200Î¼s
    end
end
```

---

## 7. å†ç¾æ€§ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### å®Ÿè£…å‰
- [ ] ç ”ç©¶ä»®èª¬ã‚’æ˜ç¢ºã«å®šå¼åŒ– (Hâ‚-1, Hâ‚-2)
- [ ] è©•ä¾¡æŒ‡æ¨™ã‚’å®šç¾© (WCET, RMSE, etc.)
- [ ] ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã‚’ç¢ºå®š

### å®Ÿè£…ä¸­
- [ ] ä¹±æ•°ã‚·ãƒ¼ãƒ‰ã‚’å›ºå®šå¯èƒ½ã«å®Ÿè£…
- [ ] ã™ã¹ã¦ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ãƒ­ã‚°å‡ºåŠ›
- [ ] ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«ä½œæˆ
- [ ] GCã‚¢ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³0ã‚’ç¢ºèª

### å®Ÿè£…å¾Œï¼ˆPoCå®Œäº†æ™‚ï¼‰
- [ ] è¤‡æ•°å›å®Ÿè¡Œã§åŒä¸€çµæœã‚’ç¢ºèª
- [ ] WCET < 600Î¼s ã‚’é”æˆ
- [ ] HDF5ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ­£ã—ãç”Ÿæˆã•ã‚Œã‚‹
- [ ] README.mdã§èµ·å‹•æ‰‹é †ã‚’æ–‡æ›¸åŒ–

---

## 8. ä»˜éŒ²

### A. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä¾‹

```yaml
# config/default_experiment.yaml
experiment:
  name: "UHTP_PoC_Test"
  subject_id: "pilot_001"

device:
  type: "mouse"  # mouse, keyboard, trackpad, auto_pd

physics:
  mass: 1.0      # kg
  damping: 5.0   # Ns/m
  stiffness: 0.0 # N/m
  noise_std: 0.01  # N

task:
  type: "sos"    # sos, cit, fitts
  duration: 60.0 # seconds

  sos:
    frequencies: [0.1, 0.23, 0.37, 0.61, 1.03, 1.61]  # Hz
    base_amplitude: 0.05  # m

  cit:
    lambda_start: 0.5    # rad/s
    lambda_step: 0.2     # rad/s
    step_interval: 30.0  # seconds

  fitts:
    num_targets: 13
    diameters: [40, 80, 160]  # mm
    widths: [4, 8, 16]        # mm

network:
  julia_port: 12345
  python_port: 12346

logging:
  output_dir: "./data"
  hdf5_enabled: true
  csv_enabled: true

random:
  seed: 42
```

### B. èµ·å‹•ã‚³ãƒãƒ³ãƒ‰

```bash
# Julia Coreèµ·å‹•
cd julia && julia --project=. src/UHTP.jl

# Python Viewerèµ·å‹•ï¼ˆåˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ï¼‰
cd python && python -m src.main

# çµ±åˆèµ·å‹•ï¼ˆæ¨å¥¨ï¼‰
./scripts/run_experiment.sh
```

### C. ä¾å­˜é–¢ä¿‚

#### Julia (Project.toml)

```toml
[deps]
StaticArrays = "90137ffa-7385-5640-81b9-e52037218182"
Sockets = "6462fe0b-24de-5631-8697-dd941f90decc"
YAML = "ddb6d928-2868-570f-bddf-ab3f9cf99eb6"

[compat]
julia = "1.10"
StaticArrays = "1.9"
```

#### Python (requirements.txt)

```
vispy>=0.14.0
pygame>=2.5.0
pyqt6>=6.6.0
h5py>=3.10.0
numpy>=1.26.0
pyyaml>=6.0.1
```

---

**ä½œæˆè€…**: Claude (research-requirements-engineering skill)
**ãƒ¬ãƒ“ãƒ¥ãƒ¼**: è¦å®Ÿæ–½
**æ‰¿èª**: è¦æ‰¿èª
**æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç¢ºèªå¾Œã€å®Ÿè£…é–‹å§‹
